(function(){"use strict";var t={2955:function(t,i,s){var e=s(6369),a=function(){var t=this,i=t._self._c;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},n=[],o=s(1001),c={},l=(0,o.Z)(c,a,n,!1,null,null,null),r=l.exports,u=s(2631),d=function(){var t=this,i=t._self._c;return i("div",{staticClass:"wrap"},[i("youtube-media",{staticStyle:{position:"absolute",left:"-9999px",top:"-9999px",width:"0",height:"0"},attrs:{"video-id":t.videoId,"player-vars":{autoplay:1}},on:{ready:t.ready,playing:t.playing,ended:t.change}}),i("div",{staticClass:"main-sec"},[i("div",{staticClass:"flux"},[t._v("Music Player")]),i("div",{staticClass:"cd-content"},[i("div",{staticClass:"cd-wrap"},[i("div",{staticClass:"cd"},[i("img",{attrs:{src:s(1032)}}),i("div",{staticClass:"cd-inner",style:{backgroundImage:`url(${t.thumnailImgUrl})`}})]),i("div",{staticClass:"thumnailImg",style:{backgroundImage:`url(${t.thumnailImgUrl})`}},[i("div",{staticClass:"cd-cover"},[t.nowSingTitle.length?i("div",{staticClass:"play-title"},[t._v(t._s(t.nowSingTitle))]):i("div",{staticClass:"play-title"},[t._v("재생을 눌러주세요.")]),i("div",{staticClass:"control-btn-wrap"},[i("div",{staticClass:"button",on:{click:t.fetchList}},[i("img",{staticClass:"refresh",attrs:{src:s(8325)}})]),t.isPlay?i("div",{staticClass:"button",on:{click:t.pause}},[i("img",{attrs:{src:s(2597)}})]):i("div",{staticClass:"button",on:{click:t.play}},[i("img",{attrs:{src:s(9251)}})]),i("div",{staticClass:"button",on:{click:t.change}},[i("img",{attrs:{src:s(1942)}})])]),i("div",{staticClass:"button big-button",on:{click:t.openList}},[t._v("목록보기")])])])])])]),i("vue-bottom-sheet",{ref:"myBottomSheet",staticClass:"music-bottom-sheet",attrs:{"is-full-screen":!0}},[Object.keys(t.playList).length?t._e():i("div",{staticClass:"not-set-sing"},[t._v("추가된 노래가 없습니다!")]),t._l(t.playList,(function(e,a,n){return i("div",{key:`play-${n}`,staticClass:"playList-item",class:{nowPlaying:t.getNowPlay(e.link)}},[i("div",{staticClass:"info-wrap",on:{click:function(i){return t.onClickChange(e.link)}}},[i("div",{staticClass:"name"},[t._v(t._s(t.getTitle(a)))]),i("div",{staticClass:"link"},[i("span",[t._v("Code: ")]),t._v(t._s(t.getCode(e.link)))]),i("div",{staticClass:"date"},[t._v(t._s(t.getAddTime(a)))])]),i("div",{staticClass:"control-wrap"},[t.getNowPlay(e.link)?i("div",{staticClass:"btn"},[i("img",{attrs:{src:s(1118)}})]):i("div",{staticClass:"button",on:{click:function(i){return t.deleteItem(a)}}},[t._v(" - ")])])])}))],2)],1)},p=[],h=(s(7658),s(7795)),g=s(7130),m={apiKey:"AIzaSyAILBlIMN8P3NiV5r-t0T6ZkQHFVa4XlMY",authDomain:"simple-database-384bb.firebaseapp.com",databaseURL:"https://simple-database-384bb-default-rtdb.firebaseio.com",projectId:"simple-database-384bb",storageBucket:"simple-database-384bb.appspot.com",messagingSenderId:"611877853207",appId:"1:611877853207:web:a3699f8216e01f5db1e452",measurementId:"G-8TNXN0KL05"};const v=(t,i,s,e)=>{const a={position:"top-center",timeout:e,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!1,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1};switch(s){case"success":t.$toast.success(i,a);break;case"warning":t.$toast.warning(i,a);break;case"error":t.$toast.error(i,a);break}};var y=v,f=s(2234),b={name:"HomeView",components:{VueBottomSheet:f.Z},data(){return{isPlay:!1,initializeApp:null,musicDataOnWeb:{},playList:{},videoId:"",nowSingTitle:"",nowSingTime:"",addSingTitle:"",addSingLink:""}},computed:{playListId(){const t=[];return Object.keys(this.playList).forEach((i=>{t.push(this.getCode(this.playList[i].link))})),t},thumnailImgUrl:{get(){return`https://img.youtube.com/vi/${this.videoId}/0.jpg`}}},watch:{videoId(){this.fetchList()}},methods:{ready(t){this.setPlayStatusForDatabase(!1),this.player=t.target},playing(t){this.setPlayStatusForDatabase(!0);const i=this.player.getVideoData();this.nowSingTitle=i.title,this.setPlayNameForDatabase(),console.log("@@@@@@@@@@@@",t),y(this,`'노래가 재생됩니다.\n', ${this.nowSingTitle}`,"success",1200)},async change(){await this.fetchList(),this.setPlayStatusForDatabase(!0);const t=this.playListId.indexOf(this.videoId,0),i=this.playListId.length<=t+1?0:t+1;this.videoId=this.playListId[i]},play(){this.setPlayStatusForDatabase(!0),this.player.playVideo()},pause(){y(this,"노래 일시정지","success",1200),this.setPlayStatusForDatabase(!1),this.player.pauseVideo()},openList(){this.$refs.myBottomSheet.open()},closeList(){this.$refs.myBottomSheet.close()},setPlayStatusForDatabase(t){this.isPlay=t;const i=(0,g.N8)();t?(0,g.t8)((0,g.iH)(i,"DomiMusic/PlayStatus/"),!0):(0,g.t8)((0,g.iH)(i,"DomiMusic/PlayStatus/"),!1),this.fetchList()},async fetchStatus(){const t=(0,g.iH)((0,g.N8)(this.initializeApp));await(0,g.U2)((0,g.iU)(t,"DomiMusic/PlayStatus/")).then((t=>{t.exists()&&(this.isPlay=t.val())})).catch((t=>{console.error(t)}))},getCode(t){let i="";if(t.includes("youtu.be/")){if(t.includes("?si=")){const s=t.split("youtu.be/")[1];return i=s.split("?si=")[0],i}i=t.split("youtu.be/")[1]}else t.includes("youtube.com/watch?v=")?i=t.split("youtube.com/watch?v=")[1]:t.includes("youtube.com/embed/")?i=t.split("youtube.com/embed/")[1]:t.includes("youtube.com/v/")&&(i=t.split("youtube.com/v/")[1]);const s=i.indexOf("&");return-1!==s&&(i=i.substring(0,s)),i},getTitle(t){return t.split("-").slice(1).join("-")},getAddTime(t){const i=Number(t.split("-")[0]),s=new Date(i);return`추가된 시간: \n      ${s.getMonth()+1}월${s.getDate()}일 \n      ${s.getHours()}:${s.getHours()}:${s.getSeconds()}`},getNowPlay(t){const i=this.getCode(t);return i===this.videoId},setPlayNameForDatabase(){const t=(0,g.N8)();(0,g.t8)((0,g.iH)(t,"DomiMusic/PlayName/"),this.nowSingTitle),(0,g.t8)((0,g.iH)(t,"DomiMusic/PlayCode/"),this.videoId)},onClickChange(t){this.videoId=this.getCode(t)},deleteItem(t){const i=(0,g.N8)();(0,g.t8)((0,g.iH)(i,`DomiMusic/MusicList/${t}/`),{}),this.fetchList()},async fetchMusicItem(){const t=(0,g.iH)((0,g.N8)(this.initializeApp));await(0,g.U2)((0,g.iU)(t,"DomiMusic/MusicList/")).then((t=>{t.exists()?(this.musicDataOnWeb=t.val(),this.playList=this.musicDataOnWeb,console.log("FETCH DATA\n",this.playList)):y(this,"데이터가 없습니다.","warning",1200)})).catch((t=>{console.error(t)}))},async fetchList(){await this.fetchMusicItem(),await this.fetchStatus()}},beforeMount(){const t=localStorage.getItem("ISCHECKED");if(t)"Check"!==t&&this.$router.replace({name:"addmusic"});else{const t=prompt("비밀번호를 입력하세요.\n비밀번호를 틀릴경우 노래추가 페이지로 이동됩니다.","");"0000"===t?localStorage.setItem("ISCHECKED","Check"):(localStorage.setItem("ISCHECKED","NoCheck"),this.$router.replace({name:"addmusic"}))}},async mounted(){this.initializeApp=(0,h.ZF)(m),await this.fetchList(),this.videoId=this.playListId[0],this.setPlayStatusForDatabase(!0)}},C=b,w=(0,o.Z)(C,d,p,!1,null,"4a973d0c",null),S=w.exports,k=function(){var t=this,i=t._self._c;return i("div",{staticClass:"wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isAddSing,expression:"isAddSing"}],staticClass:"add-sing-dialog-wrap"},[i("div",{staticClass:"add-sing-dialog"},[i("div",{staticClass:"button close",on:{click:function(i){return t.closeAddSing()}}},[t._v("x")]),i("div",{staticClass:"set-info-wrap"},[t._l(t.addSingArr,(function(s,e){return i("div",{key:`${e}`,staticClass:"set-info"},[i("div",{staticClass:"numbering"},[t._v(t._s(e+1)+" 번: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:s.title,expression:"item.title"}],attrs:{placeholder:"제목",type:"text"},domProps:{value:s.title},on:{input:[function(i){i.target.composing||t.$set(s,"title",i.target.value)},t.validateInput]}}),i("input",{directives:[{name:"model",rawName:"v-model",value:s.link,expression:"item.link"}],attrs:{placeholder:"링크",type:"text"},domProps:{value:s.link},on:{input:function(i){i.target.composing||t.$set(s,"link",i.target.value)}}}),i("div",{staticClass:"button delete-item",on:{click:function(i){return t.deleteAddSingItem(e)}}},[t._v("x")])])})),t.addSingArrLength?i("div",{staticClass:"button addArrBtn",on:{click:function(i){return t.addSingArray()}}},[t._v("목록 추가")]):t._e()],2),i("div",{staticClass:"button big-button",on:{click:t.addSing}},[t._v("노래추가")])])]),i("div",{staticClass:"music-list"},[i("div",{staticClass:"flux",on:{click:function(i){return t.clearLocalStorage()}}},[t._v("Music Player")]),Object.keys(t.playList).length?t._e():i("div",{staticClass:"not-set-sing"},[t._v("추가된 노래가 없습니다!")]),t._l(t.playList,(function(e,a,n){return i("div",{key:`play-${n}`,staticClass:"playList-item",class:{nowPlaying:t.getNowPlay(e.link)}},[i("div",{staticClass:"info-wrap"},[i("div",{staticClass:"name"},[t._v(t._s(t.getTitle(a)))]),i("div",{staticClass:"link"},[i("span",[t._v("Code: ")]),t._v(t._s(t.getCode(e.link)))]),i("div",{staticClass:"date"},[t._v(t._s(t.getAddTime(a)))])]),i("div",{staticClass:"control-wrap"},[t.getNowPlay(e.link)?i("div",{staticClass:"btn"},[i("img",{attrs:{src:s(1118)}})]):i("div",{staticClass:"button",on:{click:function(i){return t.deleteItem(a)}}},[t._v(" - ")])])])}))],2),i("div",{staticClass:"main-sec"},[i("div",{staticClass:"cd-content"},[i("div",{staticClass:"cd-wrap"},[i("div",{staticClass:"cd"},[i("div",{staticClass:"cd-inner",style:{backgroundImage:`url(${t.thumnailImgUrl})`}})]),i("div",{staticClass:"thumnailImg",style:{backgroundImage:`url(${t.thumnailImgUrl})`}},[i("div",{staticClass:"cd-cover"},[t._m(0),i("div",{staticClass:"control-btn-wrap"},[i("div",{staticClass:"button",on:{click:function(i){return t.openAddSing()}}},[t._v("+")]),i("div",{staticClass:"button",on:{click:t.fetchList}},[i("img",{staticClass:"refresh",attrs:{src:s(8325)}})])])])])])])])])},I=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"description"},[t._v("유투브 영상 링크를 복사하여 노래추가하기를 통해 노래를 추가해 주세요."),i("br"),t._v("추가하시기전에 한번씩 새로고침")])}],_={name:"AddMusic",components:{},data(){return{isPlay:!1,isAddSing:!1,initializeApp:null,musicDataOnWeb:{},playList:{},videoId:"",nowSingTitle:"",nowSingTime:"",addSingArr:[],addSingTitle:"",addSingLink:""}},computed:{addSingArrLength:{get(){return this.addSingArr.length<7}},thumnailImgUrl:{get(){return`https://img.youtube.com/vi/${this.videoId}/0.jpg`}}},methods:{getCode(t){let i="";if(t.includes("youtu.be/")){if(t.includes("?si=")){const s=t.split("youtu.be/")[1];return i=s.split("?si=")[0],i}i=t.split("youtu.be/")[1]}else t.includes("youtube.com/watch?v=")?i=t.split("youtube.com/watch?v=")[1]:t.includes("youtube.com/embed/")?i=t.split("youtube.com/embed/")[1]:t.includes("youtube.com/v/")&&(i=t.split("youtube.com/v/")[1]);const s=i.indexOf("&");return-1!==s&&(i=i.substring(0,s)),i},getTitle(t){return t.split("-").slice(1).join("-")},getAddTime(t){const i=Number(t.split("-")[0]),s=new Date(i);return`추가된 시간: \n        ${s.getMonth()+1}월${s.getDate()}일 \n        ${s.getHours()}:${s.getHours()}:${s.getSeconds()}`},fetchNowPlayCode(){const t=(0,g.iH)((0,g.N8)(this.initializeApp));(0,g.U2)((0,g.iU)(t,"DomiMusic/PlayCode/")).then((t=>{t.exists()&&(this.videoId=t.val())})).catch((t=>{console.error(t)}))},getNowPlay(t){const i=this.getCode(t);return this.videoId===i&&""!==i},openAddSing(){this.addSingArr=[],this.addSingArr.push({title:"",link:""}),this.isAddSing=!0},closeAddSing(){this.isAddSing=!1},addSingArray(){this.addSingArr.push({title:"",link:""})},deleteAddSingItem(t){this.addSingArr.splice(t,1)},addSing(){const t=this.addSingArr.filter((t=>""===t.title||""===t.link));if(t.length)return void y(this,"완료되지 않은 리스트가 있습니다.","error",1200);const i=(0,g.N8)();this.addSingArr.forEach((t=>{const s=new Date,e=s.getTime();(0,g.t8)((0,g.iH)(i,`DomiMusic/MusicList/${e}-${t.title}/`),{link:t.link})})),this.fetchList(),this.isAddSing=!1},deleteItem(t){const i=(0,g.N8)();(0,g.t8)((0,g.iH)(i,`DomiMusic/MusicList/${t}/`),{}),this.fetchList()},validateInput(){this.addSingTitle.includes("-")&&(this.addSingTitle=this.addSingTitle.replace(/-/g,""))},async fetchMusicItem(){const t=(0,g.iH)((0,g.N8)(this.initializeApp));await(0,g.U2)((0,g.iU)(t,"DomiMusic/MusicList/")).then((t=>{t.exists()?(this.musicDataOnWeb=t.val(),this.playList=this.musicDataOnWeb,console.log("FETCH DATA\n",this.playList)):y(this,"데이터가 없습니다.","warning",1200)})).catch((t=>{console.error(t)}))},async fetchList(){await this.fetchMusicItem(),await this.fetchNowPlayCode()},clearLocalStorage(){localStorage.removeItem("ISCHECKED"),y(this,"체크데이터가 삭제되었습니다.","warning",1200)}},async mounted(){this.initializeApp=(0,h.ZF)(m),await this.fetchList()}},P=_,L=(0,o.Z)(P,k,I,!1,null,"4942113c",null),A=L.exports;e.ZP.use(u.ZP);const D=[{path:"/",name:"home",component:S},{path:"/addMusic",name:"addmusic",component:A}],T=new u.ZP({routes:D});var $=T,x=s(3822);e.ZP.use(x.ZP);var M=new x.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),N=s(6734),O=s(9501);e.ZP.use(N.ZP,{global:!0,componentId:"youtube-media"}),e.ZP.config.productionTip=!1,e.ZP.use(O.ZP,{transition:"Vue-Toastification__bounce",maxToasts:20,newestOnTop:!0}),e.ZP.use(f.Z),new e.ZP({router:$,store:M,render:t=>t(r)}).$mount("#app")},1118:function(t,i,s){t.exports=s.p+"img/pause.552e03eb.svg"},1032:function(t,i,s){t.exports=s.p+"img/img_record.8bc1e662.png"},2597:function(t,i,s){t.exports=s.p+"img/pause-white.41672f03.png"},9251:function(t,i,s){t.exports=s.p+"img/play-white.7f110df7.png"},8325:function(t,i,s){t.exports=s.p+"img/refresh-w.34c097ac.png"},1942:function(t,i,s){t.exports=s.p+"img/skip-white.3f0eaba6.png"}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var n=i[e]={exports:{}};return t[e].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(i,e,a,n){if(!e){var o=1/0;for(u=0;u<t.length;u++){e=t[u][0],a=t[u][1],n=t[u][2];for(var c=!0,l=0;l<e.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](e[l])}))?e.splice(l--,1):(c=!1,n<o&&(o=n));if(c){t.splice(u--,1);var r=a();void 0!==r&&(i=r)}}return i}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[e,a,n]}}(),function(){s.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(i,{a:i}),i}}(),function(){s.d=function(t,i){for(var e in i)s.o(i,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){s.p="/DomiMusicPlayer/"}(),function(){var t={143:0};s.O.j=function(i){return 0===t[i]};var i=function(i,e){var a,n,o=e[0],c=e[1],l=e[2],r=0;if(o.some((function(i){return 0!==t[i]}))){for(a in c)s.o(c,a)&&(s.m[a]=c[a]);if(l)var u=l(s)}for(i&&i(e);r<o.length;r++)n=o[r],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},e=self["webpackChunkdomi_music_player"]=self["webpackChunkdomi_music_player"]||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))}();var e=s.O(void 0,[998],(function(){return s(2955)}));e=s.O(e)})();
//# sourceMappingURL=app.ea57d268.js.map